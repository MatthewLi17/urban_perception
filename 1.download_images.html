
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="assets/iclogo.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.3.9">
    
    
      
        <title>How To Download Google Street View Images - Urban Perceptions</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.1d29e8d0.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#how-to-download-google-street-view-images" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="Urban Perceptions" class="md-header__button md-logo" aria-label="Urban Perceptions" data-md-component="logo">
      
  
  <svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 700 700"><defs><style>.cls-1{fill:none;}.cls-2{fill:#c7c9d0;}.cls-3{clip-path:url(#clip-path);}.cls-4{clip-path:url(#clip-path-3);}.cls-5{clip-path:url(#clip-path-4);}.cls-6{clip-path:url(#clip-path-6);}</style><clipPath id="clip-path"><rect class="cls-1" x="-227.75" y="-429.57" width="1092" height="1580"/></clipPath><clipPath id="clip-path-3"><rect class="cls-1" x="572.25" y="-429.57" width="1092" height="1580"/></clipPath><clipPath id="clip-path-4"><rect class="cls-1" x="-221" y="-430.32" width="1092" height="1580"/></clipPath><clipPath id="clip-path-6"><rect class="cls-1" x="579" y="-430.32" width="1092" height="1580"/></clipPath></defs><g id="Layer_4" data-name="Layer 4"><polygon class="cls-2" points="299.62 154.69 306.36 153.9 306.33 154.99 299.62 154.69"/><polygon class="cls-2" points="515.25 201.88 522.03 201.14 520.38 204.7 515.25 201.88"/><polygon class="cls-2" points="615.51 559.5 608.82 560.21 606.76 544.65 615.18 558.56 615.51 559.5"/><polyline class="cls-2" points="608.84 560.26 609.82 560.15 615.57 559.51 615.42 559.2 608.75 560.07"/><polyline class="cls-2" points="608.91 560.25 608.83 560.26 608.8 560.19"/></g><g id="Layer_2" data-name="Layer 2"><g class="cls-3"><g class="cls-3"><path class="cls-2" d="M352.45,423c109.1,0,204.49,55.09,256.38,137.26C593.75,421.33,484.72,313.53,352.45,313.53S111.21,421.28,96.12,560.22C148,478.05,243.35,423,352.45,423"/><path class="cls-2" d="M428.05,487.89c0,42.72-33.85,77.34-75.6,77.34s-75.59-34.62-75.59-77.34,33.84-77.33,75.59-77.33,75.6,34.62,75.6,77.33"/><polygon class="cls-2" points="237.76 383.12 162.74 430.28 29 207.61 104.02 160.44 237.76 383.12"/><rect class="cls-2" x="299.58" y="154.67" width="71.7" height="180.73"/><polygon class="cls-2" points="533.79 404.42 440.21 357.05 515.25 201.88 608.83 249.24 533.79 404.42"/></g></g><polyline class="cls-2" points="102.85 559.49 96.1 560.24 106.15 543.9"/><polygon class="cls-2" points="96.1 560.24 96.22 559.29 96.24 559.97 96.17 560.21 96.1 560.24"/></g><g class="cls-5"><g class="cls-5"><path d="M359.2,422.26c109.1,0,204.49,55.09,256.38,137.26C600.5,420.58,491.47,312.78,359.2,312.78S117.91,420.58,102.82,559.52c51.9-82.17,147.28-137.26,256.38-137.26"/><path d="M434.8,487.14c0,42.72-33.85,77.34-75.6,77.34s-75.59-34.62-75.59-77.34,33.84-77.33,75.59-77.33,75.6,34.62,75.6,77.33"/><polygon points="244.51 382.37 169.49 429.53 35.75 206.86 110.77 159.69 244.51 382.37"/><rect x="306.33" y="153.92" width="71.7" height="180.73"/><polygon points="540.54 403.67 446.96 356.3 522 201.13 615.58 248.49 540.54 403.67"/></g></g><polygon class="cls-2" points="104.04 160.45 110.76 159.69 105.41 163.05 103.94 160.58 104.04 160.45"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Urban Perceptions
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              How To Download Google Street View Images
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/emilymuller1991/urban-perceptions" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="Urban Perceptions" class="md-nav__button md-logo" aria-label="Urban Perceptions" data-md-component="logo">
      
  
  <svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 700 700"><defs><style>.cls-1{fill:none;}.cls-2{fill:#c7c9d0;}.cls-3{clip-path:url(#clip-path);}.cls-4{clip-path:url(#clip-path-3);}.cls-5{clip-path:url(#clip-path-4);}.cls-6{clip-path:url(#clip-path-6);}</style><clipPath id="clip-path"><rect class="cls-1" x="-227.75" y="-429.57" width="1092" height="1580"/></clipPath><clipPath id="clip-path-3"><rect class="cls-1" x="572.25" y="-429.57" width="1092" height="1580"/></clipPath><clipPath id="clip-path-4"><rect class="cls-1" x="-221" y="-430.32" width="1092" height="1580"/></clipPath><clipPath id="clip-path-6"><rect class="cls-1" x="579" y="-430.32" width="1092" height="1580"/></clipPath></defs><g id="Layer_4" data-name="Layer 4"><polygon class="cls-2" points="299.62 154.69 306.36 153.9 306.33 154.99 299.62 154.69"/><polygon class="cls-2" points="515.25 201.88 522.03 201.14 520.38 204.7 515.25 201.88"/><polygon class="cls-2" points="615.51 559.5 608.82 560.21 606.76 544.65 615.18 558.56 615.51 559.5"/><polyline class="cls-2" points="608.84 560.26 609.82 560.15 615.57 559.51 615.42 559.2 608.75 560.07"/><polyline class="cls-2" points="608.91 560.25 608.83 560.26 608.8 560.19"/></g><g id="Layer_2" data-name="Layer 2"><g class="cls-3"><g class="cls-3"><path class="cls-2" d="M352.45,423c109.1,0,204.49,55.09,256.38,137.26C593.75,421.33,484.72,313.53,352.45,313.53S111.21,421.28,96.12,560.22C148,478.05,243.35,423,352.45,423"/><path class="cls-2" d="M428.05,487.89c0,42.72-33.85,77.34-75.6,77.34s-75.59-34.62-75.59-77.34,33.84-77.33,75.59-77.33,75.6,34.62,75.6,77.33"/><polygon class="cls-2" points="237.76 383.12 162.74 430.28 29 207.61 104.02 160.44 237.76 383.12"/><rect class="cls-2" x="299.58" y="154.67" width="71.7" height="180.73"/><polygon class="cls-2" points="533.79 404.42 440.21 357.05 515.25 201.88 608.83 249.24 533.79 404.42"/></g></g><polyline class="cls-2" points="102.85 559.49 96.1 560.24 106.15 543.9"/><polygon class="cls-2" points="96.1 560.24 96.22 559.29 96.24 559.97 96.17 560.21 96.1 560.24"/></g><g class="cls-5"><g class="cls-5"><path d="M359.2,422.26c109.1,0,204.49,55.09,256.38,137.26C600.5,420.58,491.47,312.78,359.2,312.78S117.91,420.58,102.82,559.52c51.9-82.17,147.28-137.26,256.38-137.26"/><path d="M434.8,487.14c0,42.72-33.85,77.34-75.6,77.34s-75.59-34.62-75.59-77.34,33.84-77.33,75.59-77.33,75.6,34.62,75.6,77.33"/><polygon points="244.51 382.37 169.49 429.53 35.75 206.86 110.77 159.69 244.51 382.37"/><rect x="306.33" y="153.92" width="71.7" height="180.73"/><polygon points="540.54 403.67 446.96 356.3 522 201.13 615.58 248.49 540.54 403.67"/></g></g><polygon class="cls-2" points="104.04 160.45 110.76 159.69 105.41 163.05 103.94 160.58 104.04 160.45"/></svg>

    </a>
    Urban Perceptions
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/emilymuller1991/urban-perceptions" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          How To Download Google Street View Images
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="1.download_images.html" class="md-nav__link md-nav__link--active">
        How To Download Google Street View Images
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    Requirements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#downloading-images" class="md-nav__link">
    Downloading images
  </a>
  
    <nav class="md-nav" aria-label="Downloading images">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#source-files-steps-1-3" class="md-nav__link">
    Source Files (steps 1-3)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-grid-points-lat-lon-pairs-from-admin-shape-file" class="md-nav__link">
    Get grid points, (lat, lon) pairs, from admin shape file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-street-view-metadata" class="md-nav__link">
    Get street view metadata
  </a>
  
    <nav class="md-nav" aria-label="Get street view metadata">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#part-1" class="md-nav__link">
    Part 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#part-2" class="md-nav__link">
    Part 2
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sample-points-from-roads" class="md-nav__link">
    Sample points from roads
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-azimuth-to-road-vertices" class="md-nav__link">
    Add azimuth to road vertices
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#merge-panoids-to-azimuth" class="md-nav__link">
    Merge panoids to azimuth
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#merge-road-points-to-panoids-azimuths" class="md-nav__link">
    Merge road points to panoids + azimuths
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#download-images" class="md-nav__link">
    Download images
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="2.web_app.html" class="md-nav__link">
        Creating and Deploying a Web-App
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="3.deep_cnn.html" class="md-nav__link">
        Training a Convolutional Neural Network in PyTorch
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    Requirements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#downloading-images" class="md-nav__link">
    Downloading images
  </a>
  
    <nav class="md-nav" aria-label="Downloading images">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#source-files-steps-1-3" class="md-nav__link">
    Source Files (steps 1-3)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-grid-points-lat-lon-pairs-from-admin-shape-file" class="md-nav__link">
    Get grid points, (lat, lon) pairs, from admin shape file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-street-view-metadata" class="md-nav__link">
    Get street view metadata
  </a>
  
    <nav class="md-nav" aria-label="Get street view metadata">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#part-1" class="md-nav__link">
    Part 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#part-2" class="md-nav__link">
    Part 2
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sample-points-from-roads" class="md-nav__link">
    Sample points from roads
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-azimuth-to-road-vertices" class="md-nav__link">
    Add azimuth to road vertices
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#merge-panoids-to-azimuth" class="md-nav__link">
    Merge panoids to azimuth
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#merge-road-points-to-panoids-azimuths" class="md-nav__link">
    Merge road points to panoids + azimuths
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#download-images" class="md-nav__link">
    Download images
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/emilymuller1991/urban-perceptions/tree/main/docs/1.download_images.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


  



<h1 id="how-to-download-google-street-view-images">How To Download Google Street View Images</h1>
<p>This folder contains all the necessary scripts and steps to take to download Street View Images (GSV) using the Google API. The process can be broken down into the following stages:</p>
<ol>
<li>Obtain Google street view API keys</li>
<li>Download city shape file</li>
<li>Download roads shape file</li>
<li>Create grid points from shape file (QGIS)</li>
<li>Get street view metadata and unique panoramic ids (panoid) (Python, GNU)</li>
<li>Sample points from roads (python, QGIS)</li>
<li>Add azimuths to road vertices (python, QGIS)</li>
<li>Merge panoids to azimuths (postgres)</li>
<li>Merge road points to panoids + azimuths (postgres)</li>
<li>Download images (Python, GNU)</li>
</ol>
<p><img alt="point locations of street view images" src="images/roads.png" /></p>
<p>The image above shows Greater London Authority area, with road network sampled points (dark green) and downloaded images (light green) for one year.</p>
<h2 id="requirements">Requirements</h2>
<table>
<thead>
<tr>
<th>Program</th>
<th>Version</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://www.python.org/downloads/">Python</a></td>
<td>&gt;= 3.7</td>
</tr>
<tr>
<td><a href="https://qgis.org/en/site/">QGIS</a></td>
<td>&gt;= 3.14.1-Pi</td>
</tr>
<tr>
<td><a href="https://www.gnu.org/software/parallel/">GNU parallel</a></td>
<td></td>
</tr>
<tr>
<td><a href="https://www.postgresql.org/">Postgresql</a></td>
<td>&gt;= 11.17</td>
</tr>
</tbody>
</table>
<h2 id="downloading-images">Downloading images</h2>
<h3 id="source-files-steps-1-3">Source Files (steps 1-3)</h3>
<p>Sources are listed below. These files will need to be downloaded manually for London or for a chosen target city. In addition, Street View API keys will need to be generated, <a href="https://developers.google.com/maps/documentation/streetview">see here</a>.</p>
<table>
<thead>
<tr>
<th>Dataset</th>
<th>Description</th>
<th>Source</th>
<th>Generalisability</th>
<th>Date downloaded</th>
<th>Path</th>
</tr>
</thead>
<tbody>
<tr>
<td>London Administrative Boundary</td>
<td>Shape file delineating London as an administrative unity</td>
<td>https://data.gov.uk/dataset/dda6bd34-7532-48f5-80a7-80b858d57f2b/local-authority-districts-december-2017-full-extent-boundaries-in-united-kingdom-wgs84</td>
<td>Any shape file converted to ESPG:4326</td>
<td>2019</td>
<td>city_admin/greater_london_4326.shp</td>
</tr>
<tr>
<td>London Roads</td>
<td>Shape file of road network</td>
<td>https://www.ordnancesurvey.co.uk/business-government/products/open-map-roads</td>
<td>Any road network clipped to that same extent as administrative boundary</td>
<td>2019</td>
<td>city_roads/gla_streets.shp</td>
</tr>
<tr>
<td>API keys</td>
<td>api_keys are collected from the Google Cloud Platform and enumerated line by line in a file titled api_keys_original.csv. Another copy is made called api_keys.csv</td>
<td>https://console.cloud.google.com/</td>
<td>File needs to be made using Google Cloude Platform user credentials</td>
<td>2019</td>
<td>api_keys/api_keys.csv and api_keys/api_keys_original.csv</td>
</tr>
</tbody>
</table>
<p>The folder has the following structure:</p>
<div class="highlight"><pre><span></span><code>source
│   sources.md
└───api_keys
│   └───api_keys.csv
│   └───api_keys_original.csv
└───city_admin
|   └───city_4326.shp
└───city_road
    └───city_roads.shp
</code></pre></div>
<h3 id="get-grid-points-lat-lon-pairs-from-admin-shape-file">Get grid points, (lat, lon) pairs, from admin shape file</h3>
<p>The purpose of this step is to sample the shape file at gridded intervals to create 20m spaced (lat,lon) pairs. These will then serve as input for parallel_gridy.py to obtain street view metadata.</p>
<ul>
<li>Import city shape file in QGIS.</li>
<li>Vector &gt; Research Tools &gt; Create Grid (input: admin shape file; parameters: horizontal spacing in degrees; output: grid).</li>
<li>Vector &gt; Clip (input: grid; parameters: clip to admin shape file; output: clipped grid to city shape file).</li>
<li>Right Click &gt; Export layer &gt; as.csv (output: download_images/outputs/points/city_20m.csv).</li>
</ul>
<div class="highlight"><pre><span></span><code>download_images
|   ...
|
└───outputs
    └───points
    │   └───city_20m.csv
    └───metadata
    │   └───parallel
    │   └───years
    └───functions
    ...
</code></pre></div>
<h3 id="get-street-view-metadata">Get street view metadata</h3>
<p>In order to make requests to the Google server, we require an API key. When requesting metadata, there is no limit to the number of requests which can be made, although there is a a latency limit. Google provides $200 of credit each month for each API key, which is equivalent to 25K images. Store your API keys in sources/api_keys/ making an original and a copy. The copy will get depleted when running the metadata tasks and must be recopied for each task, subject to cost constraints. The python programme parallel_grid.py will read in API keys in order to obtain metadata.</p>
<p>This step will make use of GNU parallel to speed up processing time. Feeding as input parallel chunks of the (lat, lon) pairs to  the python programme parallel_gridy.py, which then aggregates image metadata into multiple dictionaries. Our outputs are large dictionaries of panoids of the format {'panoid': [lat, lon, month, year]}. The function includes a filter on images which are not owned by Google and which do not have Status: OK.</p>
<h4 id="part-1">Part 1</h4>
<p>Create a new directory outputs/metadata/parallel. This will store the printed output from the parallel python metadata scrape. Make sure gnu parallel is installed and run:</p>
<div class="highlight"><pre><span></span><code>cat outputs/points/city_20m.csv | parallel --delay 1.5 --joblog /tmp/log --progress --pipe --block 3M --files --tmpdir outputs/metadata/parallel python3 functions/parallel_grid.py
</code></pre></div>
<p>outputs/city_20m.csv is stdin.</p>
<ul>
<li>parallel calls gnu parallel</li>
<li>--delay 1.5 creates a 1.5 second delay in sending each parallel chunk to be processed. This is used to feed in each API key.</li>
<li>--joblog prints log to '/tmp/log' and tells the time (important! copy and paste into city folder after execution!)</li>
<li>--progress prints job progress to terminal</li>
<li>--block 1M splits stdin into 1M size chunks (make sure there are enough API keys for each block or make blocks bigger)</li>
<li>--files prints location</li>
<li>--tmdir path to save location of output files</li>
<li>--python3 parallel_grid.py calls the function to be executed.</li>
</ul>
<p>!NB for dev, remove --files -tmpdir... and replace with --ungroup and retrieve output to terminal.</p>
<h4 id="part-2">Part 2</h4>
<p>Create a new directory in outputs/metadata/years. This will store the aggregated output of the parallel script separated by years.
run:</p>
<div class="highlight"><pre><span></span><code>python3 functions/parallel_output.py city_20m outputs/metadata/parallel/ /outputs/metadata/
</code></pre></div>
<p>The first argument is the city_20m name given tofiles. The second argument is the path to parallel metadata output and the third argument is path to save aggregated metadata.</p>
<h3 id="sample-points-from-roads">Sample points from roads</h3>
<p>get_road_points.py will sample 20m distance points along all roads in the city_street.shp file and output a .shp file containing sampled points. The function uses the pyQGIS module and requires <a href="https://github.com/mach0/qchainage">qchainage plugin</a> from QGIS.</p>
<div class="highlight"><pre><span></span><code>python3 functions/get_road_points.py source/city_roads/city_streets.shp outputs/roads/city_road_points_20m.shp
</code></pre></div>
<p>The first argument inputs road shape file location and the second argument passes save file and location. There are no tests for this function since the qgis plugin is not a python module itself therefore must be imported from QGIS plugins path (amend as necessary in file). Python version must mast python version for QGIS.</p>
<p>Open this shape file in QGIS and export as .csv for step 8.</p>
<h3 id="add-azimuth-to-road-vertices">Add azimuth to road vertices</h3>
<p>One step in data cleaning is to get the azimuth angle of the road to north bearing. This will then serve as a rotation of camera input when we download the images. This will be necessary since inputting standard 90 degrees is often offset and does not give a perpindicular angle to the road. The azimuth.py function uses the pyQGIS module and requires <a href="https://github.com/lcoandrade/AzimuthDistanceCalculator/blob/master/azimuthsAndDistances/azimuthsAndDistances.py">Azimuth plugin</a> from QGIS.</p>
<ul>
<li>Import city_roads shape file into QGIS</li>
<li>Vector &gt; Geometry &gt; Extract Vertices (input: city_road.shp; output: Takes a vector layer and generates a point layer with points representing the vertices in the input geometries)</li>
<li>Vector &gt; Geometry &gt; Add Geometry Attributes (input: output from previous step; output: Computes geometric properties of the features in a vector layer and includes them in the output layer)</li>
<li>Export layer &gt; as .shp (output: outputs/roads/city_road_vertices_geom.csv)</li>
</ul>
<p>In the final step we will call the function azimuth.py to get azimuth angles from vertices in shape file and merge back to our exported layer.</p>
<div class="highlight"><pre><span></span><code>python3 azimuth.py source/city_roads/city_streets.shp** outputs/roads/city_road_vertices_geom.csv outputs/roads/
</code></pre></div>
<p>The first argument is the location of the streets shape file, the second argument is the location of our QGIS output and third argument is save location of our new azimuth file. **city_streets.shp file needs to be single parts.</p>
<h3 id="merge-panoids-to-azimuth">Merge panoids to azimuth</h3>
<p>The final steps utilise psql to merge panoid metadata to azimuths to serve as input for download. It requires the installation of postgres. Once you have downloaded postgres and created user, create database as follows:</p>
<div class="highlight"><pre><span></span><code>sudo su - postgres
psql
CREATE DATABASE city;
</code></pre></div>
<div class="highlight"><pre><span></span><code>psql -U user -d city -f functions/panoids_azimuth_merge.sql
</code></pre></div>
<p>Change path to root_dir in lines 35 and 39.</p>
<h3 id="merge-road-points-to-panoids-azimuths">Merge road points to panoids + azimuths</h3>
<p>The next step is to sample panoids by the 20m road intervals. This ensures one area is not over sampled, and furthermore, have an approximation of GSV road coverage.</p>
<div class="highlight"><pre><span></span><code>psql -U user -d city -f functions/roads_panoids_merge.sql
</code></pre></div>
<p>remove duplicate IDs by specifying path in function/remove_duplicate_ids and run</p>
<div class="highlight"><pre><span></span><code>python3 functions/remove_duplicate_ids.py
</code></pre></div>
<h3 id="download-images">Download images</h3>
<p>Now we can download the images using the final output from the previous step, python and gnu parallel. Remember to copy back the original api_keys_original.csv to api_keys.csv.
We will first convert the sampled panoids to plain text as follows:</p>
<div class="highlight"><pre><span></span><code>split -l 40000000 -d city_road_sample_panoids_unique.csv to_download/city
</code></pre></div>
<p>from to_download/city remove the header manually. We are now ready to download the images. In get_images.py append the save path to suit your own local or remote drive. Ensure that there is enough space on your drive (each image is around 600kB) and run</p>
<div class="highlight"><pre><span></span><code>cat outputs/psql/to_download/city | parallel --delay 1.5 --joblog /tmp/log --pipe --block 2M --ungroup python3 functions/get_images.py
</code></pre></div>
<p>This function will download 2 angles per panoid, facing either side of the street. When blocking files for input, 2MB should ensure that each API key will download 25K images.</p>

              
            </article>
            
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="index.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Home" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Home
            </div>
          </div>
        </a>
      
      
        
        <a href="2.web_app.html" class="md-footer__link md-footer__link--next" aria-label="Next: Creating and Deploying a Web-App" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Creating and Deploying a Web-App
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": ".", "features": ["navigation.instant", "navigation.top", "toc.follow", "content.code.annotate"], "search": "assets/javascripts/workers/search.b97dbffb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.6c7ad80a.min.js"></script>
      
        <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
      
    
  </body>
</html>